<!DOCTYPE html>

<html lang="zh-CN"  class="">


<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="keywords" content="">
    
    
    <meta name="description" content="">
    
    <meta name="generator" content="teedoc">
    <meta name="theme" content="teedoc-plugin-theme-default">
    
        
        <meta name="markdown-generator" content="teedoc-plugin-markdown-parser">
        
        <script>
MathJax = {"loader": {"load": ["output/svg"]}, "tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]]}, "svg": {"fontCache": "global"}};
</script>
        
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
        <script src="/lhfdoc.github.io/static/js/theme_default/pre_main.js"></script>
        
        <link rel="stylesheet" href="/lhfdoc.github.io/static/css/theme_default/prism.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/lhfdoc.github.io/static/css/theme_default/viewer.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/lhfdoc.github.io/static/css/theme_default/dark.css" type="text/css"/>
        
        <link rel="stylesheet" href="/lhfdoc.github.io/static/css/theme_default/light.css" type="text/css"/>
        
        <script src="/lhfdoc.github.io/static/js/theme_default/jquery.min.js"></script>
        
        <script src="/lhfdoc.github.io/static/js/theme_default/split.js"></script>
        
        <link rel="stylesheet" href="/lhfdoc.github.io/static/css/search/style.css" type="text/css"/>
        
        <link rel="stylesheet" href="/lhfdoc.github.io/static/css/custom.css" type="text/css"/>
        
    
    
    <title>OpenEarable 2.0 - æ•°æ®è§£ææ¨¡å— (ParseInfo Module) - 7h4Worker</title>
    
    <script type="text/javascript">js_vars = {}</script>
    <script type="text/javascript">metadata = {"tags": [], "date": null, "update": [], "ts": 0, "author": "", "brief": "", "cover": ""}</script>
</head>


<body class="type_doc">
    
    <div id="navbar">
        <div id="navbar_menu">
            <a class="site_title" href="/lhfdoc.github.io/">
                
                
                    <h2>åµŒå…¥å¼å¼€å‘</h2>
                
        </a>
            <a id="navbar_menu_btn"></a>
        </div>
        <div id="navbar_items">
            <div>
                <ul id="nav_left">
</ul>

            </div>
            <div>
                <ul id="nav_right">
</ul>

                <ul class="nav_plugins"><li><a id="themes" class="light"></a></li></ul><ul class="nav_plugins"><li><a id="search"><span class="icon"></span><span class="placeholder">æœç´¢</span>
                            <div id="search_hints">
                                <span id="search_input_hint">è¾“å…¥å…³é”®è¯ï¼Œå¤šå…³é”®è¯ç©ºæ ¼éš”å¼€</span>
                                <span id="search_loading_hint">æ­£åœ¨åŠ è½½ï¼Œè¯·ç¨å€™ã€‚ã€‚ã€‚</span>
                                <span id="search_download_err_hint">ä¸‹è½½æ–‡ä»¶å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•æˆ–æ£€æŸ¥ç½‘ç»œ</span>
                                <span id="search_other_docs_result_hint">æ¥è‡ªå…¶å®ƒæ–‡æ¡£çš„ç»“æœ</span>
                                <span id="search_curr_doc_result_hint">å½“å‰æ–‡æ¡£æœç´¢ç»“æœ</span>
                            </div></a></li></ul>
            </div>
        </div>
    </div>
    
    <div id="wrapper">
        <div id="sidebar_wrapper">
            <div id="sidebar">
                <div id="sidebar_title">
                    
                </div>
                <ul class="show">
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/index.html"><span class="label">åµŒå…¥å¼å¼€å‘</span><span class=""></span></a></li>
<li class="active_parent no_link"><a><span class="label">ğŸ§ OpenEarable 2.0</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/openearable/index.html"><span class="label">é¡¹ç›®å…¥é—¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/openearable/project-overview.html"><span class="label">ğŸ“‹ é¡¹ç›®æ¦‚è¿°</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/openearable/architecture.html"><span class="label">ğŸ—ï¸ ç³»ç»Ÿæ¶æ„</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/openearable/deployment.html"><span class="label">ğŸš€ éƒ¨ç½²æŒ‡å—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/openearable/teedoc-guide.html"><span class="label">ğŸ“– teedocä½¿ç”¨æŒ‡å—</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">æ ¸å¿ƒåŠŸèƒ½æ¨¡å—</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/openearable/battery-module.html"><span class="label">ğŸ”‹ ç”µæºç®¡ç†æ¨¡å—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/openearable/audio-module.html"><span class="label">ğŸµ éŸ³é¢‘å¤„ç†æ¨¡å—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/openearable/sensor-module.html"><span class="label">ğŸ“¡ ä¼ æ„Ÿå™¨ç®¡ç†æ¨¡å—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/openearable/bluetooth-module.html"><span class="label">ğŸ“¶ è“ç‰™é€šä¿¡æ¨¡å—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/openearable/storage-module.html"><span class="label">ğŸ’¾ æ•°æ®å­˜å‚¨æ¨¡å—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/openearable/drivers-module.html"><span class="label">ğŸ”§ ç¡¬ä»¶é©±åŠ¨æ¨¡å—</span><span class=""></span></a></li>
</ul>
</li>
<li class="active_parent no_link"><a><span class="label">è¾…åŠ©åŠŸèƒ½æ¨¡å—</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/openearable/buttons-module.html"><span class="label">ğŸ® æŒ‰é”®å¤„ç†æ¨¡å—</span><span class=""></span></a></li>
<li class="active with_link"><a href="/lhfdoc.github.io/embedded_dev/openearable/parseinfo-module.html"><span class="label">ğŸ“Š æ•°æ®è§£ææ¨¡å—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/openearable/wire-module.html"><span class="label">ğŸ”Œ I2Cé€šä¿¡æ¨¡å—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/openearable/utils-module.html"><span class="label">ğŸ› ï¸ ç³»ç»Ÿå·¥å…·æ¨¡å—</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">ğŸ’» ç¡¬ä»¶å¹³å°</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/no_translate.html?ref=hardware_platforms/nordic.html&from=/embedded_dev/hardware_platforms/nordic.html"><span class="label">Nordic nRFç³»åˆ—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/no_translate.html?ref=hardware_platforms/esp32.html&from=/embedded_dev/hardware_platforms/esp32.html"><span class="label">ESP32ç³»åˆ—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/no_translate.html?ref=hardware_platforms/stm32.html&from=/embedded_dev/hardware_platforms/stm32.html"><span class="label">STM32ç³»åˆ—</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">âš™ï¸ å®æ—¶æ“ä½œç³»ç»Ÿ</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/no_translate.html?ref=rtos/zephyr.html&from=/embedded_dev/rtos/zephyr.html"><span class="label">Zephyr RTOS</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/no_translate.html?ref=rtos/freertos.html&from=/embedded_dev/rtos/freertos.html"><span class="label">FreeRTOS</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/no_translate.html?ref=rtos/rtthread.html&from=/embedded_dev/rtos/rtthread.html"><span class="label">RT-Thread</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">ğŸ”— é€šä¿¡åè®®</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/no_translate.html?ref=protocols/bluetooth.html&from=/embedded_dev/protocols/bluetooth.html"><span class="label">è“ç‰™åè®®</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/no_translate.html?ref=protocols/wifi.html&from=/embedded_dev/protocols/wifi.html"><span class="label">WiFiåè®®</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/no_translate.html?ref=protocols/lora.html&from=/embedded_dev/protocols/lora.html"><span class="label">LoRa/LoRaWAN</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">ğŸ› ï¸ å¼€å‘å·¥å…·</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/no_translate.html?ref=tools/ide.html&from=/embedded_dev/tools/ide.html"><span class="label">IDEç¯å¢ƒ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/no_translate.html?ref=tools/debug.html&from=/embedded_dev/tools/debug.html"><span class="label">è°ƒè¯•å·¥å…·</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/lhfdoc.github.io/embedded_dev/no_translate.html?ref=tools/simulation.html&from=/embedded_dev/tools/simulation.html"><span class="label">ä»¿çœŸå¹³å°</span><span class=""></span></a></li>
</ul>
</li>
</ul>

            </div>
        </div>
        <div id="article">
            <div id="menu_wrapper">
                <div id="menu">
                </div>
            </div>
            <div id="content_wrapper">
                <div id="content_body">
                    <div id="article_head">
                        <div id="article_title">
                            
                            <h1>OpenEarable 2.0 - æ•°æ®è§£ææ¨¡å— (ParseInfo Module)</h1>
                            
                        </div>
                        <div id="article_tags">
                            <ul>
                            
                            </ul>
                        </div>
                        <div id="article_info">
                        <div id="article_info_left">
                            <span class="article_author">
                                
                            </span>
                            
                                <span class="article_date" title="æœ€åä¿®æ”¹æ—¥æœŸï¼š 2025-07-07">
                                    2025-07-07
                                </span>
                            
                        </div>
                        <div id="article_info_right">
                            
                        </div>
                        </div>
                    </div>
                    <div id="article_tools">
                        <span></span>
                        <span id="toc_btn"></span>
                    </div>
                    <div id="update_history">
                        
                    </div>
                    <div id="article_content">
                        
                            <h2 id="%E6%A6%82%E8%BF%B0">æ¦‚è¿°</h2>
<p>æ•°æ®è§£ææ¨¡å—è´Ÿè´£å®šä¹‰å’Œç®¡ç†ä¼ æ„Ÿå™¨æ•°æ®çš„è§£ææ–¹æ¡ˆï¼Œä¸ºè“ç‰™é€šä¿¡æä¾›ä¼ æ„Ÿå™¨é…ç½®ä¿¡æ¯å’Œæ•°æ®æ ¼å¼æè¿°ã€‚è¯¥æ¨¡å—é€šè¿‡æ ‡å‡†åŒ–çš„æ•°æ®ç»“æ„å®šä¹‰ï¼Œä½¿å®¢æˆ·ç«¯èƒ½å¤Ÿæ­£ç¡®è§£æå’Œå¤„ç†æ¥è‡ªOpenEarableè®¾å¤‡çš„ä¼ æ„Ÿå™¨æ•°æ®ã€‚</p>
<h2 id="%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6">æ ¸å¿ƒç»„ä»¶</h2>
<h3 id="1.-%E4%BC%A0%E6%84%9F%E5%99%A8%E6%96%B9%E6%A1%88-%28%3Ccode%3ESensorScheme.h/cpp%3C/code%3E%29">1. ä¼ æ„Ÿå™¨æ–¹æ¡ˆ (<code>SensorScheme.h/cpp</code>)</h3>
<p>å®šä¹‰ä¼ æ„Ÿå™¨çš„å®Œæ•´é…ç½®å’Œè§£ææ–¹æ¡ˆï¼š</p>
<h4 id="%E6%A0%B8%E5%BF%83%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84">æ ¸å¿ƒæ•°æ®ç»“æ„</h4>

<pre class="language-cpp"><code class="language-cpp">struct SensorScheme {
    const char* name;                       // ä¼ æ„Ÿå™¨åç§°
    uint8_t id;                            // ä¼ æ„Ÿå™¨ID
    uint8_t groupCount;                    // ç»„ä»¶ç»„æ•°é‡
    struct SensorComponentGroup* groups;   // ç»„ä»¶ç»„æ•°ç»„
    struct SensorConfigOptions configOptions;  // é…ç½®é€‰é¡¹
};

struct ParseInfoScheme {
    uint8_t sensorCount;        // ä¼ æ„Ÿå™¨æ•°é‡
    uint8_t* sensorIds;         // ä¼ æ„Ÿå™¨IDæ•°ç»„
};
</code></pre>
<h4 id="%E9%85%8D%E7%BD%AE%E9%80%89%E9%A1%B9">é…ç½®é€‰é¡¹</h4>

<pre class="language-cpp"><code class="language-cpp">enum SensorConfigOptionsMasks {
    DATA_STREAMING = 0x01,      // æ”¯æŒæ•°æ®æµä¼ è¾“
    DATA_STORAGE = 0x02,        // æ”¯æŒæ•°æ®å­˜å‚¨
    FREQUENCIES_DEFINED = 0x10, // å®šä¹‰äº†é¢‘ç‡é€‰é¡¹
};

struct FrequencyOptions {
    uint8_t frequencyCount;         // é¢‘ç‡é€‰é¡¹æ•°é‡
    uint8_t defaultFrequencyIndex;  // é»˜è®¤é¢‘ç‡ç´¢å¼•
    uint8_t maxBleFrequencyIndex;   // æœ€å¤§è“ç‰™é¢‘ç‡ç´¢å¼•
    const float* frequencies;       // é¢‘ç‡æ•°ç»„
};

struct SensorConfigOptions {
    uint8_t availableOptions;              // å¯ç”¨é€‰é¡¹æ©ç 
    struct FrequencyOptions frequencyOptions;  // é¢‘ç‡é€‰é¡¹
};
</code></pre>
<h4 id="%E6%A0%B8%E5%BF%83%E6%8E%A5%E5%8F%A3">æ ¸å¿ƒæ¥å£</h4>

<pre class="language-cpp"><code class="language-cpp">int initParseInfoService(struct ParseInfoScheme* scheme, struct SensorScheme* sensorSchemes);
struct SensorScheme* getSensorSchemeForId(uint8_t id);
struct ParseInfoScheme* getParseInfoScheme();
float getSampleRateForSensorId(uint8_t id, uint8_t frequencyIndex);
float getSampleRateForSensor(struct SensorScheme* sensorScheme, uint8_t frequencyIndex);
</code></pre>
<h3 id="2.-%E4%BC%A0%E6%84%9F%E5%99%A8%E7%BB%84%E4%BB%B6-%28%3Ccode%3ESensorComponent.h/cpp%3C/code%3E%29">2. ä¼ æ„Ÿå™¨ç»„ä»¶ (<code>SensorComponent.h/cpp</code>)</h3>
<p>å®šä¹‰ä¼ æ„Ÿå™¨æ•°æ®çš„ç»„ä»¶ç»“æ„ï¼š</p>
<h4 id="%E5%9F%BA%E6%9C%AC%E7%BB%84%E4%BB%B6">åŸºæœ¬ç»„ä»¶</h4>

<pre class="language-cpp"><code class="language-cpp">struct SensorComponent {
    const char* name;           // ç»„ä»¶åç§° (å¦‚ &quot;x&quot;, &quot;y&quot;, &quot;z&quot;)
    const char* unit;           // å•ä½ (å¦‚ &quot;m/sÂ²&quot;, &quot;Â°/s&quot;)
    enum ParseType parseType;   // æ•°æ®ç±»å‹
};
</code></pre>
<h4 id="%E7%BB%84%E4%BB%B6%E7%BB%84">ç»„ä»¶ç»„</h4>

<pre class="language-cpp"><code class="language-cpp">struct SensorComponentGroup {
    const char* name;                      // ç»„åç§° (å¦‚ &quot;Accelerometer&quot;)
    size_t componentCount;                 // ç»„ä»¶æ•°é‡
    struct SensorComponent* components;    // ç»„ä»¶æ•°ç»„
};
</code></pre>
<h4 id="%E5%BA%8F%E5%88%97%E5%8C%96%E6%8E%A5%E5%8F%A3">åºåˆ—åŒ–æ¥å£</h4>

<pre class="language-cpp"><code class="language-cpp">size_t getSensorComponentGroupSize(struct SensorComponentGroup* group);
ssize_t serializeSensorComponentGroup(struct SensorComponentGroup* group, 
                                    char* buffer, size_t bufferSize);
</code></pre>
<h3 id="3.-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%AE%9A%E4%B9%89-%28%3Ccode%3EParseType.h%3C/code%3E%29">3. æ•°æ®ç±»å‹å®šä¹‰ (<code>ParseType.h</code>)</h3>
<p>å®šä¹‰æ”¯æŒçš„æ•°æ®è§£æç±»å‹ï¼š</p>

<pre class="language-cpp"><code class="language-cpp">enum ParseType {
    PARSE_TYPE_INT8,     // 8ä½æœ‰ç¬¦å·æ•´æ•°
    PARSE_TYPE_UINT8,    // 8ä½æ— ç¬¦å·æ•´æ•°
    PARSE_TYPE_INT16,    // 16ä½æœ‰ç¬¦å·æ•´æ•°
    PARSE_TYPE_UINT16,   // 16ä½æ— ç¬¦å·æ•´æ•°
    PARSE_TYPE_INT32,    // 32ä½æœ‰ç¬¦å·æ•´æ•°
    PARSE_TYPE_UINT32,   // 32ä½æ— ç¬¦å·æ•´æ•°
    PARSE_TYPE_FLOAT,    // 32ä½æµ®ç‚¹æ•°
    PARSE_TYPE_DOUBLE,   // 64ä½åŒç²¾åº¦æµ®ç‚¹æ•°
};

const int parseTypeSizes[] = {
    1,  // INT8/UINT8
    1,
    2,  // INT16/UINT16
    2,
    4,  // INT32/UINT32
    4,
    4,  // FLOAT
    8,  // DOUBLE
};
</code></pre>
<h3 id="4.-%E9%BB%98%E8%AE%A4%E4%BC%A0%E6%84%9F%E5%99%A8%E5%AE%9A%E4%B9%89-%28%3Ccode%3EDefaultSensors.h%3C/code%3E%29">4. é»˜è®¤ä¼ æ„Ÿå™¨å®šä¹‰ (<code>DefaultSensors.h</code>)</h3>
<p>é¢„å®šä¹‰å¸¸ç”¨ä¼ æ„Ÿå™¨çš„é…ç½®æ–¹æ¡ˆï¼ˆå…·ä½“å®ç°å¯èƒ½åœ¨ç›¸åº”çš„.cppæ–‡ä»¶ä¸­ï¼‰ã€‚</p>
<h2 id="%E8%93%9D%E7%89%99%E6%9C%8D%E5%8A%A1%E9%9B%86%E6%88%90">è“ç‰™æœåŠ¡é›†æˆ</h2>
<h3 id="GATT-%E6%9C%8D%E5%8A%A1%E5%AE%9A%E4%B9%89">GATT æœåŠ¡å®šä¹‰</h3>

<pre class="language-cpp"><code class="language-cpp">#define BT_UUID_PARSE_INFO_SERVICE_VAL \
    BT_UUID_128_ENCODE(0xcaa25cb7, 0x7e1b, 0x44f2, 0xadc9, 0xe8c06c9ced43)

#define BT_UUID_PARSE_INFO_CHARAC_VAL \
    BT_UUID_128_ENCODE(0xcaa25cb9, 0x7e1b, 0x44f2, 0xadc9, 0xe8c06c9ced43)

#define BT_UUID_PARSE_INFO_REQUEST_CHARAC_VAL \
    BT_UUID_128_ENCODE(0xcaa25cba, 0x7e1b, 0x44f2, 0xadc9, 0xe8c06c9ced43)

#define BT_UUID_PARSE_INFO_RESPONSE_CHARAC_VAL \
    BT_UUID_128_ENCODE(0xcaa25cbb, 0x7e1b, 0x44f2, 0xadc9, 0xe8c06c9ced43)
</code></pre>
<h3 id="%E7%89%B9%E6%80%A7%E5%8A%9F%E8%83%BD">ç‰¹æ€§åŠŸèƒ½</h3>
<ul>
<li><strong>Parse Info Service</strong>: ä¸»æœåŠ¡</li>
<li><strong>Parse Info Characteristic</strong>: åŸºæœ¬è§£æä¿¡æ¯</li>
<li><strong>Request Characteristic</strong>: å®¢æˆ·ç«¯è¯·æ±‚ç‰¹å®šä¼ æ„Ÿå™¨ä¿¡æ¯</li>
<li><strong>Response Characteristic</strong>: æœåŠ¡å™¨å“åº”ä¼ æ„Ÿå™¨é…ç½®</li>
</ul>
<h2 id="%E5%85%B8%E5%9E%8B%E4%BC%A0%E6%84%9F%E5%99%A8%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B">å…¸å‹ä¼ æ„Ÿå™¨é…ç½®ç¤ºä¾‹</h2>
<h3 id="IMU-%E4%BC%A0%E6%84%9F%E5%99%A8%E6%96%B9%E6%A1%88">IMU ä¼ æ„Ÿå™¨æ–¹æ¡ˆ</h3>

<pre class="language-cpp"><code class="language-cpp">// åŠ é€Ÿåº¦è®¡ç»„ä»¶
struct SensorComponent accel_components[] = {
    {&quot;x&quot;, &quot;m/sÂ²&quot;, PARSE_TYPE_FLOAT},
    {&quot;y&quot;, &quot;m/sÂ²&quot;, PARSE_TYPE_FLOAT},
    {&quot;z&quot;, &quot;m/sÂ²&quot;, PARSE_TYPE_FLOAT}
};

struct SensorComponentGroup accel_group = {
    &quot;Accelerometer&quot;,
    3,
    accel_components
};

// é™€èºä»ªç»„ä»¶
struct SensorComponent gyro_components[] = {
    {&quot;x&quot;, &quot;Â°/s&quot;, PARSE_TYPE_FLOAT},
    {&quot;y&quot;, &quot;Â°/s&quot;, PARSE_TYPE_FLOAT},
    {&quot;z&quot;, &quot;Â°/s&quot;, PARSE_TYPE_FLOAT}
};

struct SensorComponentGroup gyro_group = {
    &quot;Gyroscope&quot;,
    3,
    gyro_components
};

// é¢‘ç‡é€‰é¡¹
const float imu_frequencies[] = {1.0f, 10.0f, 25.0f, 50.0f, 100.0f};
struct FrequencyOptions imu_freq_options = {
    5,      // 5ä¸ªé¢‘ç‡é€‰é¡¹
    2,      // é»˜è®¤25Hz (ç´¢å¼•2)
    3,      // è“ç‰™æœ€å¤§50Hz (ç´¢å¼•3)
    imu_frequencies
};

// IMUä¼ æ„Ÿå™¨æ–¹æ¡ˆ
struct SensorComponentGroup imu_groups[] = {accel_group, gyro_group};
struct SensorScheme imu_scheme = {
    &quot;IMU&quot;,
    SENSOR_ID_IMU,
    2,      // 2ä¸ªç»„ä»¶ç»„
    imu_groups,
    {
        DATA_STREAMING | DATA_STORAGE | FREQUENCIES_DEFINED,
        imu_freq_options
    }
};
</code></pre>
<h3 id="PPG-%E4%BC%A0%E6%84%9F%E5%99%A8%E6%96%B9%E6%A1%88">PPG ä¼ æ„Ÿå™¨æ–¹æ¡ˆ</h3>

<pre class="language-cpp"><code class="language-cpp">struct SensorComponent ppg_components[] = {
    {&quot;raw&quot;, &quot;counts&quot;, PARSE_TYPE_UINT32},
    {&quot;heart_rate&quot;, &quot;bpm&quot;, PARSE_TYPE_FLOAT}
};

struct SensorComponentGroup ppg_group = {
    &quot;PPG&quot;,
    2,
    ppg_components
};

const float ppg_frequencies[] = {25.0f, 50.0f, 100.0f};
struct FrequencyOptions ppg_freq_options = {
    3, 1, 2,  // 3ä¸ªé€‰é¡¹ï¼Œé»˜è®¤50Hzï¼Œè“ç‰™æœ€å¤§100Hz
    ppg_frequencies
};

struct SensorScheme ppg_scheme = {
    &quot;PPG&quot;,
    SENSOR_ID_PPG,
    1,
    &amp;ppg_group,
    {
        DATA_STREAMING | DATA_STORAGE | FREQUENCIES_DEFINED,
        ppg_freq_options
    }
};
</code></pre>
<h2 id="%E6%95%B0%E6%8D%AE%E5%BA%8F%E5%88%97%E5%8C%96">æ•°æ®åºåˆ—åŒ–</h2>
<h3 id="%E7%BB%84%E4%BB%B6%E7%BB%84%E5%A4%A7%E5%B0%8F%E8%AE%A1%E7%AE%97">ç»„ä»¶ç»„å¤§å°è®¡ç®—</h3>

<pre class="language-cpp"><code class="language-cpp">size_t getSensorComponentGroupSize(struct SensorComponentGroup* group) {
    size_t size = 0;

    // ç»„åé•¿åº¦ + ç»„ä»¶æ•°é‡
    size += strlen(group-&gt;name) + 1 + sizeof(group-&gt;componentCount);

    // æ¯ä¸ªç»„ä»¶çš„ä¿¡æ¯
    for (size_t i = 0; i &lt; group-&gt;componentCount; i++) {
        size += strlen(group-&gt;components[i].name) + 1;
        size += strlen(group-&gt;components[i].unit) + 1;
        size += sizeof(group-&gt;components[i].parseType);
    }

    return size;
}
</code></pre>
<h3 id="%E5%BA%8F%E5%88%97%E5%8C%96%E6%A0%BC%E5%BC%8F">åºåˆ—åŒ–æ ¼å¼</h3>

<pre class="language-none"><code class="language-none">[Group Name][Component Count]
  [Component 1 Name][Component 1 Unit][Component 1 Type]
  [Component 2 Name][Component 2 Unit][Component 2 Type]
  ...
</code></pre>
<h2 id="%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B">åˆå§‹åŒ–æµç¨‹</h2>
<h3 id="1.-%E6%9C%8D%E5%8A%A1%E5%88%9D%E5%A7%8B%E5%8C%96">1. æœåŠ¡åˆå§‹åŒ–</h3>

<pre class="language-cpp"><code class="language-cpp">int initParseInfoService(struct ParseInfoScheme* scheme, 
                        struct SensorScheme* sensorSchemes) {
    // 1. å­˜å‚¨ä¼ æ„Ÿå™¨æ–¹æ¡ˆå¼•ç”¨
    // 2. åˆå§‹åŒ–è“ç‰™GATTæœåŠ¡
    // 3. æ³¨å†Œç‰¹æ€§å›è°ƒå‡½æ•°
    // 4. å‡†å¤‡é»˜è®¤å“åº”æ•°æ®
    return 0;
}
</code></pre>
<h3 id="2.-%E6%96%B9%E6%A1%88%E6%9F%A5%E8%AF%A2">2. æ–¹æ¡ˆæŸ¥è¯¢</h3>

<pre class="language-cpp"><code class="language-cpp">struct SensorScheme* getSensorSchemeForId(uint8_t id) {
    // éå†å·²æ³¨å†Œçš„ä¼ æ„Ÿå™¨æ–¹æ¡ˆ
    // æ ¹æ®IDåŒ¹é…å¹¶è¿”å›å¯¹åº”æ–¹æ¡ˆ
    return matching_scheme;
}
</code></pre>
<h2 id="%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BA%A4%E4%BA%92%E5%8D%8F%E8%AE%AE">å®¢æˆ·ç«¯äº¤äº’åè®®</h2>
<h3 id="1.-%E8%8E%B7%E5%8F%96%E4%BC%A0%E6%84%9F%E5%99%A8%E5%88%97%E8%A1%A8">1. è·å–ä¼ æ„Ÿå™¨åˆ—è¡¨</h3>

<pre class="language-none"><code class="language-none">Client Request:  [REQUEST_SENSOR_LIST]
Server Response: [SENSOR_COUNT][SENSOR_ID_1][SENSOR_ID_2]...
</code></pre>
<h3 id="2.-%E8%8E%B7%E5%8F%96%E4%BC%A0%E6%84%9F%E5%99%A8%E9%85%8D%E7%BD%AE">2. è·å–ä¼ æ„Ÿå™¨é…ç½®</h3>

<pre class="language-none"><code class="language-none">Client Request:  [REQUEST_SENSOR_CONFIG][SENSOR_ID]
Server Response: [SENSOR_NAME][GROUP_COUNT][GROUP_DATA...]
</code></pre>
<h3 id="3.-%E8%8E%B7%E5%8F%96%E9%A2%91%E7%8E%87%E9%80%89%E9%A1%B9">3. è·å–é¢‘ç‡é€‰é¡¹</h3>

<pre class="language-none"><code class="language-none">Client Request:  [REQUEST_FREQUENCIES][SENSOR_ID]
Server Response: [FREQ_COUNT][DEFAULT_INDEX][MAX_BLE_INDEX][FREQ_1][FREQ_2]...
</code></pre>
<h2 id="%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86">å†…å­˜ç®¡ç†</h2>
<h3 id="%E9%9D%99%E6%80%81%E9%85%8D%E7%BD%AE">é™æ€é…ç½®</h3>
<ul>
<li>ä¼ æ„Ÿå™¨æ–¹æ¡ˆä½¿ç”¨é™æ€åˆ†é…</li>
<li>ç»„ä»¶å®šä¹‰å­˜å‚¨åœ¨å¸¸é‡åŒºåŸŸ</li>
<li>é¿å…è¿è¡Œæ—¶å†…å­˜åˆ†é…</li>
</ul>
<h3 id="%E7%BC%93%E5%86%B2%E5%8C%BA%E7%AE%A1%E7%90%86">ç¼“å†²åŒºç®¡ç†</h3>
<ul>
<li>åºåˆ—åŒ–ä½¿ç”¨é¢„åˆ†é…ç¼“å†²åŒº</li>
<li>é˜²æ­¢ç¼“å†²åŒºæº¢å‡ºæ£€æŸ¥</li>
<li>é€‚å½“çš„é”™è¯¯å¤„ç†</li>
</ul>
<h2 id="%E6%89%A9%E5%B1%95%E6%80%A7%E8%AE%BE%E8%AE%A1">æ‰©å±•æ€§è®¾è®¡</h2>
<h3 id="%E6%96%B0%E4%BC%A0%E6%84%9F%E5%99%A8%E6%B7%BB%E5%8A%A0">æ–°ä¼ æ„Ÿå™¨æ·»åŠ </h3>
<ol>
<li>å®šä¹‰ä¼ æ„Ÿå™¨ç»„ä»¶ç»“æ„</li>
<li>åˆ›å»ºä¼ æ„Ÿå™¨æ–¹æ¡ˆ</li>
<li>åœ¨é»˜è®¤æ–¹æ¡ˆä¸­æ³¨å†Œ</li>
<li>æ›´æ–°ä¼ æ„Ÿå™¨IDæšä¸¾</li>
</ol>
<h3 id="%E6%96%B0%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E6%94%AF%E6%8C%81">æ–°æ•°æ®ç±»å‹æ”¯æŒ</h3>
<ol>
<li>æ‰©å±• <code>ParseType</code> æšä¸¾</li>
<li>æ›´æ–° <code>parseTypeSizes</code> æ•°ç»„</li>
<li>ä¿®æ”¹åºåˆ—åŒ–/ååºåˆ—åŒ–é€»è¾‘</li>
</ol>
<h2 id="%E8%B0%83%E8%AF%95%E5%92%8C%E9%AA%8C%E8%AF%81">è°ƒè¯•å’ŒéªŒè¯</h2>
<h3 id="%E9%85%8D%E7%BD%AE%E9%AA%8C%E8%AF%81">é…ç½®éªŒè¯</h3>
<ul>
<li>æ£€æŸ¥ç»„ä»¶æ•°é‡ä¸€è‡´æ€§</li>
<li>éªŒè¯é¢‘ç‡é€‰é¡¹æœ‰æ•ˆæ€§</li>
<li>ç¡®è®¤æ•°æ®ç±»å‹æ”¯æŒ</li>
</ul>
<h3 id="%E5%BA%8F%E5%88%97%E5%8C%96%E6%B5%8B%E8%AF%95">åºåˆ—åŒ–æµ‹è¯•</h3>
<ul>
<li>ç¼“å†²åŒºå¤§å°éªŒè¯</li>
<li>æ•°æ®å®Œæ•´æ€§æ£€æŸ¥</li>
<li>è·¨å¹³å°å…¼å®¹æ€§æµ‹è¯•</li>
</ul>
<h2 id="%E6%80%BB%E7%BB%93">æ€»ç»“</h2>
<p>æ•°æ®è§£ææ¨¡å—æä¾›äº†å®Œæ•´çš„ä¼ æ„Ÿå™¨æ•°æ®æ ¼å¼å®šä¹‰å’Œç®¡ç†æ¡†æ¶ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ol>
<li><strong>æ ‡å‡†åŒ–</strong>: ç»Ÿä¸€çš„æ•°æ®æ ¼å¼å®šä¹‰å’Œè§£ææ–¹æ¡ˆ</li>
<li><strong>çµæ´»æ€§</strong>: æ”¯æŒå¤šç§æ•°æ®ç±»å‹å’Œä¼ æ„Ÿå™¨é…ç½®</li>
<li><strong>å¯æ‰©å±•</strong>: æ˜“äºæ·»åŠ æ–°ä¼ æ„Ÿå™¨å’Œæ•°æ®ç±»å‹</li>
<li><strong>é«˜æ•ˆæ€§</strong>: é™æ€é…ç½®å’Œä¼˜åŒ–çš„åºåˆ—åŒ–æœºåˆ¶</li>
<li><strong>å…¼å®¹æ€§</strong>: è“ç‰™GATTæœåŠ¡é›†æˆå’Œè·¨å¹³å°æ”¯æŒ</li>
</ol>
<p>è¯¥æ¨¡å—ä¸ºOpenEarableè®¾å¤‡çš„æ•°æ®é€šä¿¡æä¾›äº†å¯é çš„æ ¼å¼åŒ–åŸºç¡€è®¾æ–½ï¼Œç¡®ä¿å®¢æˆ·ç«¯èƒ½å¤Ÿæ­£ç¡®è§£æå’Œå¤„ç†ä¼ æ„Ÿå™¨æ•°æ®ã€‚</p>

                        
                    </div>
                </div>
                <div id="previous_next">
                    <div id="previous">
                        
                        <a href="/lhfdoc.github.io/embedded_dev/openearable/buttons-module.html">
                            <span class="icon"></span>
                            <span class="label">ğŸ® æŒ‰é”®å¤„ç†æ¨¡å—</span>
                        </a>
                        
                    </div>
                    <div id="next">
                        
                        <a href="/lhfdoc.github.io/embedded_dev/openearable/wire-module.html">
                            <span class="label">ğŸ”Œ I2Cé€šä¿¡æ¨¡å—</span>
                            <span class="icon"></span>
                        </a>
                        
                    </div>
                </div>
                <div id="comments-container"></div>
            </div>
            <div id="toc_wrapper">
                <div id="toc">
                    <div id="toc_content">
                            
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a id="to_top" href="#"></a>
    <div id="doc_footer">
        <div id="footer">
            <div id="footer_top">
                <ul>
<li><a>ç›¸å…³èµ„æº</a><ul><li><a target="_blank" href="https://www.nordicsemi.com/">Nordicå®˜ç½‘</a></li>
<li><a target="_blank" href="https://zephyrproject.org/">Zephyré¡¹ç›®</a></li>
</ul>
</li>
</ul>

            </div>
            <div id="footer_bottom">
                <ul>
</ul>

            </div>
        </div>
    </div>
    
        <script src="/lhfdoc.github.io/teedoc-plugin-markdown-parser/mermaid.min.js"></script>
    
        <script>mermaid.initialize({startOnLoad:true});</script>
    
        <script src="/lhfdoc.github.io/static/js/theme_default/tocbot.min.js"></script>
    
        <script src="/lhfdoc.github.io/static/js/theme_default/main.js"></script>
    
        <script src="/lhfdoc.github.io/static/js/theme_default/viewer.min.js"></script>
    
        <script src="/lhfdoc.github.io/static/css/theme_default/prism.min.js"></script>
    
        <script src="/lhfdoc.github.io/static/js/search/search_main.js"></script>
    
        <script src="/lhfdoc.github.io/static/js/custom.js"></script>
    
</body>

</html>